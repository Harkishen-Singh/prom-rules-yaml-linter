package main

import (
	"fmt"
	"io/ioutil"
	"os"

	yaml "gopkg.in/yaml.v3"
)

func main() {
	fileList := os.Args[1:]

	for _, fileName := range fileList {
		if err := process(fileName); err != nil {
			panic(err)
		}

	}
}

// process processes the files passed as params
// which are then formatted as required.
func process(fileName string) error {
	b, err := ioutil.ReadFile(fileName)
	if err != nil {
		return fmt.Errorf("FILE_NOT_FOUND: %s", fileName)
	}

	var (
		// g     group
		gNode yaml.Node
	)
	fmt.Println("crossed this")

	if err := yaml.Unmarshal(b, &gNode); err != nil {
		return fmt.Errorf("UNMARSHAL_ERROR_NODE: %s", err.Error())
	}

	fmt.Println("----------------------------")

	bb, err := yaml.Marshal(gNode)
	if err != nil {
		panic(err)
	}

	fmt.Println(string(bb))

	return nil
}